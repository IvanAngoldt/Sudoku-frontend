import React, { useEffect, useState } from 'react';
import { useParams } from 'react-router-dom';
import styles from './NewsPage.module.css';

const NewsPage = () => {
  const { id } = useParams();
  const [news, setNews] = useState(null);

  useEffect(() => {
    // Здесь будет запрос к API для получения новости по ID
    // Пока используем моковые данные
    const mockNews = {
      1: {
        title: 'Новые стратегии решения Судоку',
        content: 'Мы добавили новые стратегии для решения сложных головоломок Судоку. Узнайте, как применять продвинутые техники для решения самых сложных задач.',
        date: '20 марта 2024',
        image: '/imgs/newsNewStrategies.png',
        fullContent: `Мы рады представить новые стратегии решения Судоку, которые помогут вам справиться даже с самыми сложными головоломками. Наши эксперты разработали уникальные методы, которые значительно упростят процесс решения.

## Основные стратегии

### 1. Метод "Скрытые одиночки"
Этот метод основан на поиске чисел, которые могут находиться только в одной ячейке определенного блока, строки или столбца. Он особенно эффективен на средних уровнях сложности.

### 2. Техника "Пересечение"
Позволяет находить возможные числа в ячейках, анализируя пересечения строк, столбцов и блоков. Отлично подходит для продвинутых игроков.

### 3. Стратегия "X-Wing"
Одна из самых сложных техник, требующая внимательного анализа всей сетки. Помогает решать самые сложные головоломки.

## Как начать обучение

1. Начните с простых стратегий
2. Практикуйтесь ежедневно
3. Используйте наши интерактивные уроки
4. Следите за своим прогрессом

Каждая из этих техник будет подробно объяснена с примерами и пошаговыми инструкциями в наших новых уроках.`
      },
      2: {
        title: 'Турнир по Судоку',
        content: 'Присоединяйтесь к нашему еженедельному турниру по Судоку. Соревнуйтесь с другими игроками и выигрывайте призы!',
        date: '19 марта 2024',
        image: '/imgs/newsTournament.png',
        fullContent: `Мы запускаем новый еженедельный турнир по Судоку! 

## Расписание турниров

- Каждую субботу в 15:00 по московскому времени
- Длительность: 2 часа
- Регистрация открыта до пятницы 18:00

## Призовой фонд

1. Первое место - 1000 рублей
2. Второе место - 500 рублей
3. Третье место - 300 рублей

## Дополнительные награды

- Все участники получат специальные достижения в профиле
- Лучшие игроки получат уникальные значки
- Участники с высоким рейтингом получат доступ к эксклюзивным головоломкам

## Как принять участие

1. Зарегистрируйтесь на сайте
2. Подтвердите участие в турнире
3. Приходите в указанное время
4. Решайте головоломки на время
5. Следите за таблицей результатов

Не упустите шанс показать свои навыки и выиграть призы!`
      },
      3: {
        title: 'Обновление платформы',
        content: 'Мы рады представить новое обновление нашей платформы с улучшенным интерфейсом и новыми функциями.',
        date: '18 марта 2024',
        image: '/imgs/newsUpdate.png',
        fullContent: `Мы выпустили крупное обновление платформы! 

## Новые функции

### 1. Улучшенный интерфейс
- Темная тема для комфортной игры в вечернее время
- Адаптивный дизайн для всех устройств
- Улучшенная навигация

### 2. Система достижений
- Новые награды за достижения
- Ежедневные задания
- Специальные события

### 3. Статистика решений
- Подробная аналитика ваших решений
- Сравнение с другими игроками
- Графики прогресса

### 4. Новые уровни сложности
- Экспертный уровень
- Специальные головоломки
- Ежедневные челленджи

### 5. Социальные функции
- Система друзей
- Чаты для общения
- Совместное решение головоломок

## Оптимизация

- Улучшена производительность
- Исправлены баги
- Оптимизирована загрузка страниц

Присоединяйтесь к нам и испытайте все новые возможности!`
      }
    };

    setNews(mockNews[id]);
  }, [id]);

  if (!news) {
    return <div>Загрузка...</div>;
  }

  const formatContent = (content) => {
    return content.split('\n').map((paragraph, index) => {
      if (paragraph.startsWith('## ')) {
        return <h2 key={index}>{paragraph.replace('## ', '')}</h2>;
      }
      if (paragraph.startsWith('### ')) {
        return <h3 key={index}>{paragraph.replace('### ', '')}</h3>;
      }
      if (paragraph.startsWith('- ')) {
        return <li key={index}>{paragraph.replace('- ', '')}</li>;
      }
      if (paragraph.match(/^\d+\. /)) {
        return <li key={index}>{paragraph.replace(/^\d+\. /, '')}</li>;
      }
      return <p key={index}>{paragraph}</p>;
    });
  };

  return (
    <div className={styles.newsPage}>
      <div className={styles.newsHeader}>
        <h1>{news.title}</h1>
        <span className={styles.date}>{news.date}</span>
      </div>
      
      {news.image && (
        <div className={styles.imageContainer}>
          <img src={news.image} alt={news.title} className={styles.newsImage} />
        </div>
      )}

      <div className={styles.newsContent}>
        <div className={styles.fullContent}>
          {formatContent(news.fullContent)}
        </div>
      </div>
    </div>
  );
};

export default NewsPage; 